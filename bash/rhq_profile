
# RHQ PROFILE
export_if_exists RHQ "${HOME}/java_local/projects/riderhq"
alias rhq-disk-capacity='ssh-disk-capacity aws1 bm2 aws2 aws3 s5'

augment_path_if_exists "${RHQ}/deploy"
augment_path_if_exists "${RHQ}/deploy/css"
augment_path_if_exists "${RHQ}/scripts"
augment_path_if_exists "${HOME}/Dropbox/riderhq/scripts"
alias fetch-restore-latest='sudo su - postgres -c "fetchBaseBackup.sh --subdomain bm2 --latest --restore"'
alias restore-latest='sudo su - postgres -c "restoreFromBaseBackup.sh --subdomain bm2 --latest --dev"'

fetch-rhq-user-data() {	
	rsync --delete-after --exclude backup --exclude nginx_static --exclude test_data --exclude log --exclude emails_sent --exclude googlecheckout -avz -e ssh --progress $1:/var/riderhq/ /var/riderhq/ 
}
alias update-rhq-data='fetch-rhq-user-data bm2'
alias rerun-rhq-css="cd $RHQ && rerun --pattern './src/**/*.less' \"cd $RHQ && compile-css.sh && rsync-css.sh\""